<h1>New item</h1>



<% form_for(@item) do |f| %>
  <%= f.error_messages %>
  
  
  <%= f.hidden_field :account_id, :value => params[:account_id] %>
  
  <% if params[:type] == "service" %>  
  <p>
    Service:
    <% services_array = Service.all.map { |service| [service.name, service.product_id] } %>
    <%= options_for_select(services_array) %>
    <%= f.select(:product_id, options_for_select(services_array)) %>
  </p>
  <% elsif params[:type] == "drug" %>
  <p>
    Drug:
    <% drugitems_array = DrugItem.all.map { |drugitem| [drugitem.name, drugitem.product_id] } %>
    <%= options_for_select(drugitems_array) %>
    <%= f.select(:product_id, options_for_select(drugitems_array)) %>
  </p>

  <% elsif params[:type] == "admission" %>
  <p>
    Admission:
    <%= f.hidden_field :account_id, :value => @admission.account_id %>
    <%= f.hidden_field :product_id, :value => @admission.product_id %>
    <%= f.hidden_field :original_price, :value => @admission.totalprice %> 
    
  </p>
  <% else %>
  <p>
    Wrong parameter for type of service!<br/>
    You should clarify type of item and account id<br/>
    <i>e.g, items/new?type=service&account_id=1</i>

  </p>
  <% end %>
  
  <p>
    <%= f.submit 'Create' %>
  </p>
<% end %>

<%= link_to 'Back', items_path %>